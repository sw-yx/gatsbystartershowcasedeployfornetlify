{"data":{"markdownRemark":null,"npmPackage":{"name":"gatsby-plugin-netlify-headers","description":"A Gatsby plugin which generates a _headers file for netlify","keywords":["gatsby","gatsby-plugin","netlify","http/2-server-push"],"lastPublisher":{"name":"kylemathews","avatar":"https://gravatar.com/avatar/e567aa8adbd2d49cd9990ea1ed19d4eb"},"repository":null,"readme":{"childMarkdownRemark":{"html":"<h1 id=\"gatsby-plugin-netlify-headers\"><a href=\"#gatsby-plugin-netlify-headers\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-netlify-headers</h1>\n<p>Generates a <code class=\"language-text\">_headers</code> file at the root of the public folder, to configure <a href=\"https://www.netlify.com/docs/headers-and-basic-auth/\">HTTP headers on netlify</a>. Notably, you can immediately enable HTTP/2 server push of critical Gatsby assets through the <code class=\"language-text\">Link</code> headers.</p>\n<p>By default, the plugin will add HTTP/2 assets to server push the critical Gatsby scripts (ones that have the <code class=\"language-text\">preload</code> attribute already). It will also add some basic security headers. You can easily add or replace headers through the plugin config.</p>\n<h2 id=\"install\"><a href=\"#install\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<p><code class=\"language-text\">npm install --save gatsby-plugin-netlify-headers</code></p>\n<h2 id=\"how-to-use\"><a href=\"#how-to-use\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token template-string\"><span class=\"token string\">` gatsby-plugin-netlify-headers`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// make sure to put last in the array</span>\n<span class=\"token punctuation\">]</span></code></pre>\n      </div>\n<h2 id=\"configuration\"><a href=\"#configuration\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuration</h2>\n<p>If you just need the critical assets, you donâ€™t need to add any additional config. However, if you want to add headers, remove default headers, or transform the given headers, you can use the following configuration options.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// make sure to put last in the array</span>\n  <span class=\"token punctuation\">{</span>\n    resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">` gatsby-plugin-netlify-headers`</span></span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>                                  <span class=\"token comment\">// option to add more headers. `Link` headers are transformed by the below criteria</span>\n      allPageHeaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>                           <span class=\"token comment\">// option to add headers for all pages. `Link` headers are transformed by the below criteria</span>\n      mergeSecurityHeaders<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>                   <span class=\"token comment\">// boolean to turn off the default security headers</span>\n      mergeLinkHeaders<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>                      <span class=\"token comment\">// boolean to turn off the default gatsby js headers (disabled by default, until gzip is fixed for server push)</span>\n      mergeCachingHeaders<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>                    <span class=\"token comment\">// boolean to turn off the default caching headers</span>\n      transformHeaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> headers<span class=\"token punctuation\">,</span> <span class=\"token comment\">// optional transform for manipulating headers under each path (e.g.sorting), etc.</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre>\n      </div>\n<h3 id=\"headers\"><a href=\"#headers\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Headers</h3>\n<p>The headers object represents a JS version of the <a href=\"https://www.netlify.com/docs/headers-and-basic-auth/\">netlify <code class=\"language-text\">_headers</code> file format</a>. You should pass in a object with string keys (representing the paths) and an array of strings for each header.</p>\n<p>An example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Basic-Auth: someuser:somepassword anotheruser:anotherpassword\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"/my-page\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// matching headers (by type) are replaced by netlify with more specific routes</span>\n        <span class=\"token string\">\"Basic-Auth: differentuser:differentpassword\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Link paths are specially handed by this plugin. Since most files are processed and cache-busted through Gatsby (with a file hash), the plugin will transform any base file names to the hashed variants. If the file is not hashed, it will ensure the path is valid relative to the output <code class=\"language-text\">public</code> folder. You should be able to reference assets imported through javascript in the <code class=\"language-text\">static</code> folder.</p>\n<p>Do not specify the public path in the config, as the plugin will provide it for you.</p>\n<p>The netlify <code class=\"language-text\">_headers</code> file does not inherit headers, and it will replace any matching headers it finds in more specific routes. For example, if you add a link to the the root wildcard path (<code class=\"language-text\">/*</code>), it will be replaced by any more specific path. If you want a resource to put linked across the site, you will have to add to every path. To make this easier, the plugin provides the <code class=\"language-text\">allPageHeaders</code> option to inject the same headers on every path.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    allPageHeaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"Link: &lt;/static/my-logo.png>; rel=preload; as=image\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Basic-Auth: someuser:somepassword anotheruser:anotherpassword\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>You can validate the <code class=\"language-text\">_headers</code> config through the <a href=\"https://play.netlify.com/headers\">netlify playground app</a>.</p>","timeToRead":2}}}},"pageContext":{"slug":"/packages/gatsby-plugin-netlify-headers/","id":"a738e6f7-adea-5798-93d9-a543f2222ae6"}}