{"data":{"markdownRemark":{"html":"<p>Before we go through the steps for adding search to your Gatsby website, let’s examine the components needed for adding search to a website.</p>\n<p>There are three required components for adding search to your Gatsby website:</p>\n<ol>\n<li>index</li>\n<li>engine</li>\n<li>UI</li>\n</ol>\n<h2 id=\"site-search-components\"><a href=\"#site-search-components\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Site search components</h2>\n<h3 id=\"search-index\"><a href=\"#search-index\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Search index</h3>\n<p>The search index is a copy of your data stored in a search-friendly format. An index is for optimizing speed and performance when executing a search query. Without an index, every search would need to scan every page in your site—which quickly becomes inefficient.</p>\n<h3 id=\"search-engine\"><a href=\"#search-engine\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Search engine</h3>\n<p>The search engine takes a search query, runs it through the search index, and returns any matching documents.</p>\n<h3 id=\"search-ui\"><a href=\"#search-ui\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Search UI</h3>\n<p>The UI component provides an interface to the user, which allows them to write search queries and view the results of each query.</p>\n<h2 id=\"adding-search-to-your-site\"><a href=\"#adding-search-to-your-site\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding search to your site</h2>\n<p>Now that you know the three required components, there are a few ways to approach adding search to your Gatsby-powered site.</p>\n<h3 id=\"use-an-open-source-search-engine\"><a href=\"#use-an-open-source-search-engine\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use an open source search engine</h3>\n<p>Using an open source search engine is always free and allows you to enable offline search for your site. Note that you need to be careful with offline search because the entire search index has to be brought into the client, which can affect the bundle size significantly.</p>\n<p>Open source libraries like <a href=\"https://www.npmjs.com/package/elasticlunr\"><code class=\"language-text\">elasticlunr</code></a> or <a href=\"https://github.com/bvaughn/js-search\"><code class=\"language-text\">js-search</code></a> can be used to enable search for your site.</p>\n<p>Doing so will require you to create a search index when your site is built. For <code class=\"language-text\">elesticlunr</code>, there is a plugin called <a href=\"https://github.com/andrew-codes/gatsby-plugin-elasticlunr-search\"><code class=\"language-text\">gatsby-plugin-elasticlunr-search</code></a> that creates a search index automatically.</p>\n<p>For other libraries, you can use a combination of <a href=\"https://www.gatsbyjs.org/docs/node-apis/#onCreateNode\"><code class=\"language-text\">onCreateNode</code></a>, <a href=\"https://www.gatsbyjs.org/docs/node-apis/#setFieldsOnGraphQLNodeType\"><code class=\"language-text\">setFieldsOnGraphQLNodeType</code></a> and <a href=\"https://www.gatsbyjs.org/docs/node-apis/#sourceNodes\"><code class=\"language-text\">sourceNodes</code></a> from the Gatsby node API to create the search index and make it available in GraphQL. For more info on how to do this check out <a href=\"https://github.com/andrew-codes/gatsby-plugin-elasticlunr-search/blob/master/src/gatsby-node.js#L88-L126\"><code class=\"language-text\">gatsby-plugin-elasticlunr-search</code>’s source code</a>.</p>\n<p>Another option is to generate the search index at the end of the build using the <a href=\"https://www.gatsbyjs.org/docs/node-apis/#onPostBuild\"><code class=\"language-text\">onPostBuild</code></a> node API. This approach is used by <a href=\"https://github.com/humanseelabs/gatsby-plugin-lunr\"><code class=\"language-text\">gatsby-plugin-lunr</code></a> to build a multilanguage index.</p>\n<p>After building the search index and including it in Gatsby’s data layer, you will need to allow the user to search your website. This is typically done by using a text input to capture the search query, then using one of the libraries mentioned above to retrieve the desired document(s).</p>\n<h3 id=\"use-an-api-based-search-engine\"><a href=\"#use-an-api-based-search-engine\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use an API-based search engine</h3>\n<p>Another option is to use an external search engine. This solution is much more scalable as visitors to your site don’t have to download your entire search index (which becomes very large as your site grows) in order to search your site. The tradeoff is you’ll need to pay for hosting the search engine or pay for a commercial search service.</p>\n<p>There are many available both open source that you can host yourself and commercial hosted options.</p>\n<ul>\n<li><a href=\"https://www.elastic.co/products/elasticsearch\">ElasticSearch</a> — OSS and has commercial hosting available</li>\n<li><a href=\"http://lucene.apache.org/solr/\">Solr</a> — OSS and has commercial hosting available</li>\n<li><a href=\"https://www.algolia.com/\">Algolia</a> — Commercial</li>\n</ul>\n<p>If you’re building a documentation website you can use <a href=\"https://community.algolia.com/docsearch/\">Algolia’s DocSearch feature</a>. It will automatically create a search index from the content of your pages.</p>\n<p>If your website does not qualify as documentation, you need to collect the search index at build time and upload it using <a href=\"https://github.com/algolia/gatsby-plugin-algolia\"><code class=\"language-text\">gatsby-plugin-algolia</code></a>.</p>\n<p>When using Algolia, they host the search index and search engine for you. Your search queries will be sent to their servers which will respond with any results. You’ll need to implement your own UI; Algolia provides a <a href=\"https://github.com/algolia/react-instantsearch\">React library</a> which may have components you’d like to use.</p>\n<p>Elasticsearch has several React component libraries for search e.g. <a href=\"https://github.com/appbaseio/reactivesearch\">https://github.com/appbaseio/reactivesearch</a></p>","excerpt":"Before we go through the steps for adding search to your Gatsby website, let’s examine the components needed for adding search to a website…","timeToRead":4,"fields":{"slug":"/docs/adding-search/","anchor":"adding-search"},"frontmatter":{"title":"Adding search to your Gatsby website"},"parent":{"__typename":"File","relativePath":"docs/adding-search.md"}}},"pageContext":{"slug":"/docs/adding-search/"}}