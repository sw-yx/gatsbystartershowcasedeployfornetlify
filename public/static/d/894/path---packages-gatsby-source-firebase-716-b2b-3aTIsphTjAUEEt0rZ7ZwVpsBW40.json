{"data":{"markdownRemark":null,"npmPackage":{"name":"gatsby-source-firebase","description":"Gatsby plugin to turn Firebase into a Gatsby data source.","keywords":["gatsby","gatsby-plugin","firebase"],"lastPublisher":{"name":"ryanflorence","avatar":"https://gravatar.com/avatar/749001c9fe6927c4b069a45c2a3d68f7"},"repository":{"url":"https://github.com/reacttraining/gatsby-source-firebase"},"readme":{"childMarkdownRemark":{"html":"<h1 id=\"gatsby-firebase-source\"><a href=\"#gatsby-firebase-source\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby Firebase Source</h1>\n<p>Quick and dirty firebase source for Gatsby. Allows you to query your firebase data right into your statically generated pages with Gatsby.</p>\n<p><a href=\"./screenshot.png\">screenshot</a></p>\n<h2 id=\"usage\"><a href=\"#usage\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<ol>\n<li>\n<p>First you need a Private Key from firebase for priviledged enviornments, find out how to get it here: <a href=\"https://firebase.google.com/docs/admin/setup\">https://firebase.google.com/docs/admin/setup</a> (or click the settings gear > Service accounts tab > Generate New Private Key button at the bottom)</p>\n</li>\n<li>\n<p>Place that private key .json file somewhere in your gatsby project (the root is fine).</p>\n</li>\n<li>\n<p>Configure gatsby-config.js</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// the plugin options are:</span>\n<span class=\"token punctuation\">{</span>\n  credential<span class=\"token punctuation\">,</span>\n  databaseURL<span class=\"token punctuation\">,</span>\n  types<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">,</span>\n    query<span class=\"token punctuation\">,</span>\n    map\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Here's an example:</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// the rest of your config</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-firebase`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// point to the firebase private key downloaded</span>\n        credential<span class=\"token punctuation\">:</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./firebase-key.json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// your firebase database root url</span>\n        databaseURL<span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://reactjs-training.firebaseio.com\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token comment\">// you can have multiple \"types\" that point to different paths</span>\n        types<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// this type will become `allWorkshop` in graphql</span>\n            type<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Workshop\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token comment\">// the path to get the records from</span>\n            path<span class=\"token punctuation\">:</span> <span class=\"token string\">\"v2/data/workshops\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token comment\">// probably don't want your entire database, use the query option</span>\n            <span class=\"token comment\">// to limit however you'd like</span>\n            query<span class=\"token punctuation\">:</span> ref <span class=\"token operator\">=></span> ref<span class=\"token punctuation\">.</span><span class=\"token function\">limitToLast</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// This allows you to map your data to data that GraphQL likes:</span>\n            <span class=\"token comment\">// 1. Turn your lists into actual arrays</span>\n            <span class=\"token comment\">// 2. Fix keys that GraphQL hates. It doesn't allow number keys</span>\n            <span class=\"token comment\">//    like \"0\", you'll get this error pretty often:</span>\n            <span class=\"token comment\">//    Error: Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"0\" does not</span>\n            <span class=\"token comment\">// 3. Remove stuff you don't need.</span>\n            <span class=\"token comment\">//</span>\n            <span class=\"token comment\">// Feel free to mutate, we sent you a copy anyway.</span>\n            map<span class=\"token punctuation\">:</span> node <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// fix keys graphql hates</span>\n              node<span class=\"token punctuation\">.</span>nineteenEightyFive <span class=\"token operator\">=</span> node<span class=\"token punctuation\">[</span><span class=\"token string\">'1985'</span><span class=\"token punctuation\">]</span>\n              <span class=\"token keyword\">delete</span> node<span class=\"token punctuation\">[</span><span class=\"token string\">'1985'</span><span class=\"token punctuation\">]</span>\n\n              <span class=\"token comment\">// convert a child list to an array:</span>\n              <span class=\"token keyword\">return</span> node<span class=\"token punctuation\">.</span>sessions <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>sessions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>key <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> _key<span class=\"token punctuation\">:</span> key<span class=\"token punctuation\">,</span> session<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>sessions<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n              <span class=\"token comment\">// finally, return the node</span>\n              <span class=\"token keyword\">return</span> node\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n          <span class=\"token comment\">// if you're data is really simple, this should be fine too</span>\n          <span class=\"token punctuation\">{</span>\n            type<span class=\"token punctuation\">:</span> <span class=\"token string\">\"CourseDescriptions\"</span><span class=\"token punctuation\">,</span>\n            path<span class=\"token punctuation\">:</span> <span class=\"token string\">\"text/courseDescriptions\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Enjoy!</p>","timeToRead":2}}}},"pageContext":{"slug":"/packages/gatsby-source-firebase/","id":"4e7b6797-4304-580d-889a-f732d0cac23b"}}