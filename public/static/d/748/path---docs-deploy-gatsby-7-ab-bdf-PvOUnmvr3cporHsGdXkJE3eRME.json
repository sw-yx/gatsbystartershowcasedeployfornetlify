{"data":{"markdownRemark":{"html":"<h2 id=\"tutorials-for-deploying-on-different-static-site-hosts\"><a href=\"#tutorials-for-deploying-on-different-static-site-hosts\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tutorials for deploying on different static site hosts</h2>\n<ul>\n<li><a href=\"/docs/deploy-gatsby/#netlify\">Netlify</a></li>\n<li><a href=\"/docs/deploy-gatsby/#amazon-s3-and-cloudfront\">S3/Cloudfront</a></li>\n<li><a href=\"/docs/deploy-gatsby/#github-pages\">GitHub Pages</a></li>\n<li><a href=\"/docs/deploy-gatsby/#gitlab-pages\">GitLab Pages</a></li>\n<li><a href=\"/docs/deploy-gatsby/#heroku\">Heroku</a></li>\n<li><a href=\"/docs/deploy-gatsby/#now\">Now</a></li>\n<li><a href=\"/docs/deploy-gatsby/#aerobatic\">Aerobatic</a></li>\n</ul>\n<h2 id=\"netlify\"><a href=\"#netlify\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Netlify</h2>\n<p>Netlify is an excellent option for deploying Gatsby sites. Netlify is a unified\nplatform that automates your code to create high-performant, easily maintainable\nsites and web apps. They provide continuous deployment (Git-triggered builds),\nan intelligent, global CDN, full DNS (including custom domains), automated\nHTTPS, asset acceleration, and a lot more.</p>\n<p>Their free tier includes unlimited personal and commercial projects, HTTPS,\ncontinuous deployment from public or private repos and more.</p>\n<h3 id=\"deploying-to-netlify\"><a href=\"#deploying-to-netlify\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploying to Netlify</h3>\n<p>To deploy your Gatsby site to Netlify, go to the <a href=\"https://app.netlify.com/start\">create a new\nsite</a> page, select your project repo from GitHub,\nGitLab, or Bitbucket, and follow the prompts.</p>\n<h2 id=\"amazon-s3-and-cloudfront\"><a href=\"#amazon-s3-and-cloudfront\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Amazon S3 and Cloudfront</h2>\n<p>If you decide to host your Gatsby site on S3 with Cloudfront as CDN, you should\nchange the “Origin Domain Name” on the Cloudfront panel with the real URL of\nyour S3 bucket: <strong>examplewebsite.com.s3-website-eu-west-1.amazonaws.com</strong>\nreplacing the default URL suggested by Amazon\n<strong>examplewebsite.com.s3.amazonaws.com</strong>.</p>\n<p>Without this change,\n<a href=\"https://forums.aws.amazon.com/message.jspa?messageID=314454\">S3 doesn’t look for index.html files when serving “clean urls”</a>.</p>\n<h2 id=\"github-pages\"><a href=\"#github-pages\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub Pages</h2>\n<h3 id=\"deploying-a-project-page\"><a href=\"#deploying-a-project-page\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploying a project page</h3>\n<p>You can deploy sites on GitHub Pages with or without a custom domain. If you\nchoose to use the default setup (without a custom domain), or if you create a\nproject site, you will need to setup your site with\n<a href=\"/docs/path-prefix/\">path prefixing</a>.</p>\n<p>On GitHub, you get one site per GitHub account and organization, and unlimited\nproject sites. So it is most likely you will be creating a project site. If you\ndo not have an existing repository on GitHub that you plan to use, take the time\nnow to create a new repository on GitHub.</p>\n<h3 id=\"use-the-npm-package-code-classlanguage-textgh-pagescode-for-deploying\"><a href=\"#use-the-npm-package-code-classlanguage-textgh-pagescode-for-deploying\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use the NPM package <code class=\"language-text\">gh-pages</code> for deploying</h3>\n<p>First add <strong>gh-pages</strong> as a <code class=\"language-text\">devDependency</code> of your site and create an npm\nscript to <strong>deploy</strong> your project by running <code class=\"language-text\">npm install gh-pages --save-dev</code>.</p>\n<p>Then add a <code class=\"language-text\">deploy</code> script in your <code class=\"language-text\">package.json</code> file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">&quot;scripts&quot;: {\n  &quot;deploy&quot;: &quot;gatsby build --prefix-paths &amp;&amp; gh-pages -d public&quot;,\n}</code></pre>\n      </div>\n<p>In the <code class=\"language-text\">gatsby-config.js</code>, set the <code class=\"language-text\">pathPrefix</code> to be added to your site’s link\npaths. The <code class=\"language-text\">pathPrefix</code> should be the project name in your repository. (ex.\n<code class=\"language-text\">https://github.com/username/project-name</code> - your <code class=\"language-text\">pathPrefix</code> should be\n<code class=\"language-text\">/project-name</code>). See\n<a href=\"/docs/path-prefix/\">the docs page on path prefixing for more</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  pathPrefix: `/project-name`,\n}</code></pre>\n      </div>\n<p>If you have not yet initialized a git repository in your working gatsby site\nrepo, set up git in your project with <code class=\"language-text\">git init</code>. Then tell Gatsby where to\ndeploy your site by adding the git remote address with https or ssh. Here is how\nto do it with https: <code class=\"language-text\">git remote add origin git@github.com:username/project-name.git</code>.</p>\n<p>Now run <code class=\"language-text\">npm run deploy</code>. Preview changes in your GitHub page\n<code class=\"language-text\">https://username.github.io/project-name/</code>. You can also find the link to your\nsite on GitHub under <code class=\"language-text\">Settings</code> > <code class=\"language-text\">GitHub Pages</code>.</p>\n<p>If this is not successful, make sure that <code class=\"language-text\">gh-pages</code> is set as the source branch in your repository’s <code class=\"language-text\">Settings</code> > <code class=\"language-text\">GitHub Pages</code> and then re-run <code class=\"language-text\">npm run deploy</code>.</p>\n<h3 id=\"deploying-a-userorganization-site\"><a href=\"#deploying-a-userorganization-site\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploying a user/organization site</h3>\n<p>Unlike project pages, user/organization sites on GitHub live in a special\nrepository dedicated to files for the site. The sites must be published from the\n<code class=\"language-text\">master</code> branch of the repository which means the site source files should be\nkept in a branch named <code class=\"language-text\">source</code> or something similar. We also don’t need to\nprefix links like we do with project sites.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">&quot;scripts&quot;: {\n  &quot;deploy&quot;: &quot;gatsby build &amp;&amp; gh-pages -b master -d public&quot;,\n}</code></pre>\n      </div>\n<p>The repository for these sites requires a special name. See\n<a href=\"https://help.github.com/articles/user-organization-and-project-pages/\">https://help.github.com/articles/user-organization-and-project-pages/</a> for\ndocumentation on naming your site’s repository.</p>\n<p>If you wish to link your custom domain with your <code class=\"language-text\">user.github.io</code> repo, you will need\na <code class=\"language-text\">CNAME</code> file inside the <code class=\"language-text\">static</code> folder at the root directory level with the your\ncustom domain url inside, like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">your-custom-domain.com</code></pre>\n      </div>\n<h2 id=\"gitlab-pages\"><a href=\"#gitlab-pages\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitLab Pages</h2>\n<p>GitLab Pages are similar to GitHub Pages, perhaps even easier to setup. It also\nsupports custom domain names and SSL certificates. The process of setting GitLab\npages up is made a lot easier with GitLab’s included continuous integration\nplatform.</p>\n<p>Create a new GitLab repository, initialize your Gatsby project folder if you\nhaven’t already, and add the GitLab remote.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">git init\ngit remote add origin git@gitlab.com:examplerepository\ngit add .\ngit push -u origin master</code></pre>\n      </div>\n<p>You can deploy sites on GitLab Pages with or without a custom domain. If you choose to use the default setup (without a custom domain), or if you create a project site, you will need to setup your site with path prefixing. If adding a custom domain, you can skip the Path Prefix step, and remove <code class=\"language-text\">--prefix-paths</code> from the gitlab-ci.yml file.</p>\n<h3 id=\"path-prefix\"><a href=\"#path-prefix\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Path Prefix</h3>\n<p>As the site will be hosted under yourname.gitlab.io/examplerepository/, you will need to configure Gatsby to use the Path Prefix plugin.</p>\n<p>In the <code class=\"language-text\">gatsby-config.js</code>, set the <code class=\"language-text\">pathPrefix</code> to be added to your site’s link\npaths. The <code class=\"language-text\">pathPrefix</code> should be the project name in your repository. (ex.\n<code class=\"language-text\">https://gitlab.com/yourname/examplerepository/</code> - your <code class=\"language-text\">pathPrefix</code> should be\n<code class=\"language-text\">/examplerepository</code>). See\n<a href=\"/docs/path-prefix/\">the docs page on path prefixing for more</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  pathPrefix: `/examplerepository`,\n}</code></pre>\n      </div>\n<h3 id=\"build-and-deploy-with-gitlab-ci\"><a href=\"#build-and-deploy-with-gitlab-ci\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Build and Deploy with GitLab CI</h3>\n<p>To use GitLab’s continuous integration (CI), you need to add a <code class=\"language-text\">.gitlab-ci.yml</code>\nconfiguration file. This is the file that Gitlab uses to manage the CI job.</p>\n<p>It can easily be added to your repository by the <a href=\"https://gitlab.com\">Gitlab</a>\nwebsite, as the online editor contains a pre-built template for Gatsby deployment.</p>\n<p>To use the template open your repository on their website, select the ‘Setup CI/CD’ option on\nthe center menu, and it will create a new blank <code class=\"language-text\">.gitlab-ci.yml</code> for you. Now\nselect the ‘Apply a Gitlab CI Yaml Template’ drop-down, and type ‘Gatsby’ into\nthe filter. Select the Gatsby option, click ‘Commit Changes’, and you are done!</p>\n<p>If adding this manually to your project, the file needs to contain a few required\nfields:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">image: node:latest\n\n# This folder is cached between builds\n# http://docs.gitlab.com/ce/ci/yaml/README.html#cache\ncache:\n  paths:\n  - node_modules/\n\npages:\n  script:\n  - npm install\n  - ./node_modules/.bin/gatsby build --prefix-paths\n  artifacts:\n    paths:\n    - public\n  only:\n  - master</code></pre>\n      </div>\n<p>The CI platform uses Docker images/containers, so <code class=\"language-text\">image: node:latest</code> tells the\nCI to use the latest node image. <code class=\"language-text\">cache:</code> caches the <code class=\"language-text\">node_modules</code> folder\nin between builds, so subsequent builds should be a lot faster as it doesn’t have\nto reinstall all the dependencies required. <code class=\"language-text\">pages:</code> is the name of the\nCI stage. You can have multiple stages, e.g. ‘Test’, ‘Build’, ‘Deploy’ etc.\n<code class=\"language-text\">script:</code> starts the next part of the CI stage, telling it to start running the\nbelow scripts inside the image selected. We have used the <code class=\"language-text\">npm install</code> and\n<code class=\"language-text\">./node_modules/.bin/gatsby build --prefix-paths</code> which will install all dependencies, and\nstart the static site build, respectively.</p>\n<p>We have used\n<code class=\"language-text\">./node_modules/.bin/gatsby build --prefix-paths</code> because we then don’t have to install\ngatsby-cli to build the image, as it has already been included and installed\nwith <code class=\"language-text\">npm install</code>. We have included <code class=\"language-text\">--prefix-paths</code> as when running the command <em>without</em> that flag, Gatsby ignores your pathPrefix. <code class=\"language-text\">artifacts:</code> and <code class=\"language-text\">paths:</code> are used to tell GitLab pages\nwhere the static files are kept. <code class=\"language-text\">only:</code> and <code class=\"language-text\">master</code> tells the CI to only run\nthe above instructions when the master branch is deployed.</p>\n<p>Add that configuration, and with the next master branch push, your site should\nhave been built correctly. This can be checked by going to your repository on\nGitLab, and selecting CI/CD in the sidebar. This will then show you a log of all\njobs that have either succeeded or failed. You can click on the failed status,\nand then select the job to get more information about why your build may have\nfailed.</p>\n<p>If all went well, you should now be able to access your site. It will be hosted\nunder gitlab.io - for example if you have have a repository under your\nnamespace, the url will be yourname.gitlab.io/examplerepository.</p>\n<p>Visit the\n<a href=\"https://gitlab.com/help/user/project/pages/getting_started_part_one.md\">GitLab Pages</a>\nto learn how to setup custom domains and find out about advanced configurations.</p>\n<h2 id=\"heroku\"><a href=\"#heroku\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Heroku</h2>\n<p>You can use the <a href=\"https://github.com/heroku/heroku-buildpack-static\">heroku buildpack static</a> to handle the static files of your site.</p>\n<p>Set the <code class=\"language-text\">heroku/node.js</code> and <code class=\"language-text\">heroku-buildpack-static</code> buildpacks on your application creating an <code class=\"language-text\">app.json</code> file on the root of your project.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;buildpacks&quot;: [\n    {\n      &quot;url&quot;: &quot;heroku/nodejs&quot;\n    },\n    {\n      &quot;url&quot;: &quot;https://github.com/heroku/heroku-buildpack-static&quot;\n    }\n  ]\n}</code></pre>\n      </div>\n<p>Sometimes specifying buildpacks via the <code class=\"language-text\">app.json</code> file doesn’t work. If this is your case try to add them in the Heroku dashboard or via the CLI.</p>\n<p>Add a <code class=\"language-text\">heroku-postbuild</code> script in your <code class=\"language-text\">package.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">{\n\n  // ...\n  &quot;scripts&quot;: {\n    // ...\n    &quot;heroku-postbuild&quot;: &quot;gatsby build&quot;\n    // ...\n  }\n  // ...\n}</code></pre>\n      </div>\n<p>Finally, add a <code class=\"language-text\">static.json</code> file in the root of your project to define the directory where your static assets will be. You can check all the options for this file in the <a href=\"https://github.com/heroku/heroku-buildpack-static#configuration\">heroku-buildpack-static configuration</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;root&quot;: &quot;public/&quot;,\n  &quot;headers&quot;: {\n    &quot;/**.js&quot;: {\n      &quot;Cache-Control&quot;: &quot;public, max-age=0, must-revalidate&quot;\n    }\n  }\n}</code></pre>\n      </div>\n<h2 id=\"now\"><a href=\"#now\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Now</h2>\n<p>In order to deploy your Gatsby project using <a href=\"https://zeit.co/now\">Now</a>, you can do the following:</p>\n<ol>\n<li>Install the Now CLI</li>\n</ol>\n<p><code class=\"language-text\">npm install -g now</code></p>\n<ol start=\"2\">\n<li>Install a node server package (such as <code class=\"language-text\">serve</code>, or <code class=\"language-text\">http-server</code>)</li>\n</ol>\n<p><code class=\"language-text\">npm install --save serve</code></p>\n<ol start=\"3\">\n<li>Add a <code class=\"language-text\">start</code> script to your <code class=\"language-text\">package.json</code> file, this is what Now will use to run your application:</li>\n</ol>\n<p><code class=\"language-text\">&quot;start&quot;: &quot;serve public/&quot;</code></p>\n<ol start=\"4\">\n<li>Run <code class=\"language-text\">now</code> at the root of your Gatsby project, this will upload your project, run the <code class=\"language-text\">build</code> script, and then your <code class=\"language-text\">start</code> script.</li>\n</ol>\n<h2 id=\"debugging-tips\"><a href=\"#debugging-tips\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging tips</h2>\n<h3 id=\"dont-minify-html\"><a href=\"#dont-minify-html\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Don’t minify HTML</h3>\n<p>If you see the following error:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">Unable to find element with ID ##</code></pre>\n      </div>\n<p>or alternatively</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">Uncaught Error: Minified React error #32; visit http://facebook.github.io/react/docs/error-decoder.html?invariant=32&amp;args[]=## for the full message or use the non-minified dev environment for full errors and additional helpful warnings.</code></pre>\n      </div>\n<p>This is a new problem when dealing with static sites built with React. This is\nnot caused by Gatsby. React uses HTML comments to help identify locations of\ncomponents that do not render anything. If you are using a CDN that minifies\nyour HTML, it will eliminate the HTML comments used by React to take control of\nthe page on the client. Cloudflare is a CDN that minifies HTML by default.</p>\n<h2 id=\"aerobatic\"><a href=\"#aerobatic\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Aerobatic</h2>\n<p><a href=\"https://www.aerobatic.com\">Aerobatic</a> is a specialized static site host. You can easily deploy your Gatsby site to Aerobatic with the following steps:</p>\n<ol>\n<li>Install the Aerobatic CLI:</li>\n</ol>\n<p><code class=\"language-text\">npm install aerobatic-cli -g</code></p>\n<ol start=\"2\">\n<li>Create a new Aerobatic site at the root of your Gatsby project:</li>\n</ol>\n<p><code class=\"language-text\">aero create --name &lt;your-site-name&gt;</code></p>\n<ol start=\"3\">\n<li>Deploy your Gatsby build output:</li>\n</ol>\n<p><code class=\"language-text\">aero deploy --directory public</code></p>\n<p>Your site will be ready on our CDN at https://<your-site-name>.aerobaticapp.com in a matter of seconds.</p>\n<p>There are some additional HTTP header optimizations you can configure in your <code class=\"language-text\">aerobatic.yml</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\">\n      <pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Note with below setting it is not neccessary to pass --directory to aero deploy command</span>\n  <span class=\"token key atrule\">directory</span><span class=\"token punctuation\">:</span> public\n  <span class=\"token comment\"># Turn off the Aerobatic asset fingerprinting since Gatsby already does this</span>\n  <span class=\"token key atrule\">optimizer</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">fingerprintAssets</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n\n<span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Force aggressive 1yr max-age header for all .js and .js.map requests</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">-</span>headers\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'/*.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/*.js.map'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">\"Cache-Control\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"public, max-age=31536000\"</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webpage</code></pre>\n      </div>\n<p>Learn more about Gatsy and Aerobatic at <a href=\"https://www.aerobatic.com/docs/static-site-generators/#react\">https://www.aerobatic.com/docs/static-site-generators/#react</a></p>","excerpt":"Tutorials for deploying on different static site hosts Netlify S3/Cloudfront GitHub Pages GitLab Pages Heroku Now Aerobatic Netlify Netlify…","timeToRead":10,"fields":{"slug":"/docs/deploy-gatsby/","anchor":"deploy-gatsby"},"frontmatter":{"title":"Deploying Gatsby"},"parent":{"__typename":"File","relativePath":"docs/deploy-gatsby.md"}}},"pageContext":{"slug":"/docs/deploy-gatsby/"}}