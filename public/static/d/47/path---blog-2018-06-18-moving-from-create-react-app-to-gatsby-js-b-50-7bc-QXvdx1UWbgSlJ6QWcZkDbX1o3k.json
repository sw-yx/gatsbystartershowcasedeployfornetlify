{"data":{"markdownRemark":{"html":"<p><em>This blog post was originally posted on the <a href=\"https://khaledgarbaya.net/articles/moving-from-create-react-app-to-gatsby-js\">Khaled Garbaya Blog</a></em></p>\n<p><img src=\"https://images.ctfassets.net/4x6byznv2pet/B8BpyFB720SAM8qW68qgY/0b2020576a2d44640a9de1302b6e9ff8/businessman-2108029_1280.jpg\" alt=\"Man moving boxes\"></p>\n<p><a href=\"https://github.com/facebook/create-react-app\">create-react-app</a> is a build CLI, it helps you bootstrap a new React app without the need to configure tools like <a href=\"https://github.com/webpack/webpack\">webpack</a> or <a href=\"https://github.com/babel/babel\">Babel</a>.</p>\n<blockquote>\n<p>They are preconfigured and hidden so that you can focus on the code.</p>\n</blockquote>\n<p>If you came across <a href=\"https://github.com/gatsbyjs/gatsby\">Gatsby</a> you will notice that there is a lot of similarity between them. In this blog post I will explain the key difference between the two.</p>\n<h2 id=\"what-is-gatsby\"><a href=\"#what-is-gatsby\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Gatsby?</h2>\n<p><img src=\"https://images.ctfassets.net/4x6byznv2pet/4OW1X9ex1mImko8G4w4WAK/a16fceab310b718c7f375a760c4e1e16/logo-gatsby-0603eb9dd6bdfec9599dbc7590f891be-347ea.jpg\" alt=\"gatsby-logo\"></p>\n<p>Gatsby is a blazing fast static site generator for <a href=\"https://github.com/facebook/react\">React</a>. Actually, it is more than that. Think of it as a PWA (Progressive Web App) framework with best practices baked in. For example: you get code and data splitting out-of-the-box.</p>\n<h2 id=\"why-move-to-gatsby\"><a href=\"#why-move-to-gatsby\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why Move to Gatsby?</h2>\n<p><img src=\"https://images.ctfassets.net/4x6byznv2pet/3KWkbincyQaSCOE2SIkS88/4e89a683e737c99688d662cd7786468d/tools-864983_1280.jpg\" alt=\"tools-picture\"></p>\n<p>Gatsby lets you use a modern web stack without the setup headache. With its flexible plugin system it lets you bring your own data sources like <a href=\"https://contentful.com\">Contentful</a>, databases or your filesystem.</p>\n<p>When you build your Gatsby website you will end up with static files. They are easy to deploy on a lot of services like <a href=\"https://netlify.com\">Netlify</a>, <a href=\"https://aws.amazon.com/s3/\">Amazon S3</a> and more.</p>\n<p>Gatsby provides code and data splitting out-of-the-box. It loads your critical HTML and CSS first. Once that’s loaded it prefetches resources for other pages. That’s why clicking around feels so fast.</p>\n<p>Gatsby uses React components as a view layer so you can share and reuse them across pages/projects. Once it loads the page’s javascript code, your website becomes a full React app.</p>\n<p>Gatsby uses <a href=\"https://graphql.org/learn/\">GraphQL</a> to share data across pages. You only get the data you need in the page. At build time Gatsby will resolve the query and embed it in your page.</p>\n<h2 id=\"gatsby-project-folder-structure\"><a href=\"#gatsby-project-folder-structure\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby project folder structure</h2>\n<div class=\"gatsby-highlight\" data-language=\"sh\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">├── LICENSE\n├── README.md\n├── gatsby-config.js\n├── gatsby-node.js\n├── node_modules\n├── package-lock.json\n├── package.json\n├── src\n│   ├── layouts\n│   ├── pages\n│   └── templates\n└── static</code></pre>\n      </div>\n<h2 id=\"from-react-routes-to-gatsby-pages\"><a href=\"#from-react-routes-to-gatsby-pages\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>From React Routes to Gatsby Pages</h2>\n<p><img src=\"https://images.ctfassets.net/4x6byznv2pet/3PdoKQ8J1uscaW0s2IMuEo/8bce2e060e4a6ec7791c9fe8d6e2cfb6/road-601871_1280.jpg\" alt=\"road-601871 1280\"></p>\n<p>There are two types of routes:</p>\n<ul>\n<li>static - when you know all the parts that will define your route, like <code class=\"language-text\">/home</code></li>\n<li>dynamic - when part of your route is only known at runtime like, <code class=\"language-text\">blog/:slug</code></li>\n</ul>\n<p>Let’s assume you have the following static routes in your <code class=\"language-text\">create-react-app</code> project:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Route exact path<span class=\"token operator\">=</span><span class=\"token string\">'/'</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">'/blog'</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>Blog<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">'/contact'</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>Contact<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre>\n      </div>\n<p>Gatsby will create these routes automatically based on files you create in your <code class=\"language-text\">pages</code> folder. The good news is you’ve already created the React components so it’s a matter of copying them to the right place. The exception is the home page which should be named <code class=\"language-text\">index.js</code>.  You will end up with something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">├── LICENSE\n├── README.md\n├── gatsby-config.js\n├── gatsby-node.js\n├── node_modules\n├── package-lock.json\n├── package.json\n├── src\n│   ├── layouts\n│   ├── pages\n│   │    ├──  index.js\n│   │    ├──  blog.js\n│   │    ├──  contact.js\n│   └── templates\n└── static</code></pre>\n      </div>\n<p>Now that you’ve converted your static routes let’s tackle the dynamic routes.</p>\n<p>I will take an example of blog posts in this case loaded from Contentful. Every blog post has a unique slug used to load its content.</p>\n<p>In a normal React app the route will look something like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/blog/:slug\"</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>BlogPost<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre>\n      </div>\n<p>And your <code class=\"language-text\">BlogPost</code> component will look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// a function that requests a blog post from Contentful's API</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getBlogPost <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./contentful-service\"</span>\n<span class=\"token keyword\">import</span> marked <span class=\"token keyword\">from</span> <span class=\"token string\">\"marked\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPost</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> status<span class=\"token punctuation\">:</span> <span class=\"token string\">\"loading\"</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">getBlogPost</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>match<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>data <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>error <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> status<span class=\"token punctuation\">:</span> <span class=\"token string\">\"error\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Sorry<span class=\"token punctuation\">,</span> but the blog post was not found<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div\n          dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> <span class=\"token function\">marked</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>To create pages dynamically in Gatsby you need to write some logic in the <code class=\"language-text\">gatsby-node.js</code> file. To get an idea on what is possible to do at build time check out <a href=\"/docs/node-apis\">Gatsby’s node API docs</a>.</p>\n<p>We will use the <a href=\"/docs/node-apis/#createPages\">createPages node API</a>.</p>\n<p>Following our Contentful example we need to create a page for each article. To do that first we need to get a list of all blog posts and then create pages for them based on their unique slug.</p>\n<p>Your <code class=\"language-text\">gatsby-node.js</code> file will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> boundActionCreators <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> boundActionCreators\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> blogPostTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`src/templates/blog-post.js`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Query for markdown nodes to use in creating pages.</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token string\">`\n          {\n            allContentfulBlogPost(limit: 1000) {\n              edges {\n                node {\n                  slug\n                }\n              }\n            }\n          }\n        `</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>result <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Create blog post pages.</span>\n        result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allContentfulBlogPost<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>edge <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>slug<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// required</span>\n            component<span class=\"token punctuation\">:</span> blogPostTemplate<span class=\"token punctuation\">,</span>\n            context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              slug<span class=\"token punctuation\">:</span> edge<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span> <span class=\"token comment\">// in react this will be the `:slug` part</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Since you already have the <code class=\"language-text\">BlogPost</code> component from your React project move it to <code class=\"language-text\">src/template/blog-post.js</code>.</p>\n<p>Your Gatbsy project will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\">\n      <pre class=\"language-sh\"><code class=\"language-sh\">├── LICENSE\n├── README.md\n├── gatsby-config.js\n├── gatsby-node.js\n├── node_modules\n├── package-lock.json\n├── package.json\n├── src\n│   ├── layouts\n│   ├── pages\n│   │    ├──  index.js\n│   │    ├──  blog.js\n│   │    ├──  contact.js\n│   └── templates\n│   │    ├──  blog-post.js\n└── static</code></pre>\n      </div>\n<p>You need to make some slight modifications to your <code class=\"language-text\">BlogPost</code> component.</p>\n<p><code class=\"language-text\">src/templates/blog-post.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPost</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>contentfulBlogPost\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div\n          dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n            __html<span class=\"token punctuation\">:</span> post<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>childMarkdownRemark<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BlogPost\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n query BlogPostBySlug($slug: String!) {\n   contentfulBlogPost(fields: { slug: { eq: $slug } }) {\n     title\n      content {\n        childMarkdownRemark {\n          html\n        }\n      }\n   }\n }\n`</span></span></code></pre>\n      </div>\n<p>Note the <code class=\"language-text\">$slug</code> part that’s passed through the context when creating the page to be able to use it in the GraphQL query.</p>\n<p>Gatsby will pick the exported <code class=\"language-text\">pageQuery</code> const and will know it’s a GraphQL query string by the <code class=\"language-text\">graphql</code> tag.</p>\n<h2 id=\"from-the-react-state-to-graphql\"><a href=\"#from-the-react-state-to-graphql\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>From the React state to GraphQL</h2>\n<p><img src=\"https://images.ctfassets.net/4x6byznv2pet/xodXA1B5OCGKW6eAkqi8e/47789915812c2ab95512f97efb1fcb79/files-1614223_1280.jpg\" alt=\"files-1614223 1280\"></p>\n<p>I will not go in depth with how to manage state with React since there are a lot of ways to achieve that. There is the new <a href=\"https://reactjs.org/docs/context.html\">React 16 Context API</a> or you can use other state libraries such as <a href=\"https://github.com/reduxjs/react-redux\">Redux</a>. Using Gatsby you can request the data you need using the GraphQL data layer as shown in the previous example. This option is only available in the root components. This will change in <a href=\"https://next.gatsbyjs.org/docs/static-query/\">Gatsby v2 with the new <code class=\"language-text\">StaticQuery</code> feature</a>. You can still use <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/examples/using-redux\">Redux with Gatsby</a> if you need to.</p>\n<h2 id=\"deployment\"><a href=\"#deployment\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deployment</h2>\n<p><img src=\"https://images.ctfassets.net/4x6byznv2pet/2xjoMXpIKoAwAM4sqeOCcA/721945e76b4b5861476a9ce8781a326c/server-2160321_1280.jpg\" alt=\"server-2160321 1280\"></p>\n<p>Since Gatsby builds “static” files you can host them on tons of services. One of my favourites is <a href=\"https://www.netlify.com/\">Netlify</a>. There is also <a href=\"https://aws.amazon.com/s3/\">AWS S3</a> and more, see the <a href=\"/docs/deploy-gatsby/\">deploying Gatsby documentation</a> for examples.</p>\n<h2 id=\"resources\"><a href=\"#resources\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resources</h2>\n<ul>\n<li><a href=\"https://howtocontentful.com/\">Contentful tutorials</a></li>\n<li><a href=\"https://www.contentful.com/blog/2018/02/28/contentful-gatsby-video-tutorials/\">Contentful’s Gatsby video series</a></li>\n<li><a href=\"/docs/\">Gatsby Getting Started docs</a></li>\n</ul>","excerpt":"This blog post was originally posted on the  Khaled Garbaya Blog create-react-app  is a build CLI, it helps you bootstrap a new React app…","timeToRead":6,"fields":{"slug":"/blog/2018-06-18-moving-from-create-react-app-to-gatsby-js/"},"frontmatter":{"title":"Moving from create-react-app to Gatsby.js","excerpt":"How to Move from create-react-app to Gatsby.js","date":"June 18th 2018","rawDate":"2018-06-18T00:00:00.000Z","canonicalLink":"https://khaledgarbaya.net/articles/moving-from-create-react-app-to-gatsby-js","publishedAt":"Khaled Garbaya Blog","tags":["contentful","react"],"image":null,"imageAuthor":null,"imageAuthorLink":null,"imageTitle":null,"showImageInArticle":null,"author":{"id":"Khaled Garbaya","bio":"Software developer and full-time opensourcerer at @contentful. He speaks multiple languages and is often overheard saying \"Bonjour\" in HTML.","twitter":"@khaled_garbaya","avatar":{"childImageSharp":{"fixed":{"tracedSVG":"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30' version='1'%3e%3crect width='100%25' height='100%25' fill='%23f6f2f8'/%3e%3cpath d='M14 3c-5 1-7 9-5 16 1 1 0 2-4 4l-5 5c0 2 1 2 15 2h16v-3c0-1 0-2-1-1 0 2 0 2-4 0-6-3-7-4-6-6 2-1 2-10 1-13-1-4-4-5-7-4m-1 4c-1 2 4 4 5 3V7h-5' fill='%23e0d6eb' fill-rule='evenodd'/%3e%3c/svg%3e","width":63,"height":63,"src":"/static/khaled-garbaya-fc2ff455d0506eb12ce01516df689aa1-eb2ad.jpg","srcSet":"/static/khaled-garbaya-fc2ff455d0506eb12ce01516df689aa1-eb2ad.jpg 1x,\n/static/khaled-garbaya-fc2ff455d0506eb12ce01516df689aa1-2d344.jpg 1.5x,\n/static/khaled-garbaya-fc2ff455d0506eb12ce01516df689aa1-6dc12.jpg 2x,\n/static/khaled-garbaya-fc2ff455d0506eb12ce01516df689aa1-c804e.jpg 3x"}}},"fields":{"slug":"/contributors/khaled-garbaya/"}}}}},"pageContext":{"slug":"/blog/2018-06-18-moving-from-create-react-app-to-gatsby-js/","prev":{"fields":{"slug":"/blog/2018-06-18-why-narative-loves-gatsby/","package":null,"starterShowcase":null},"frontmatter":{"title":"Why Narative loves Gatsby","draft":null,"canonicalLink":"https://medium.com/narative/why-narative-loves-gatsbyjs-825b6b3bc9a4","publishedAt":null,"tags":["gatsby","narative","graphql","blog","agency"]}},"next":{"fields":{"slug":"/blog/2018-06-08-life-after-layouts/","package":null,"starterShowcase":null},"frontmatter":{"title":"Life After Layouts","draft":null,"canonicalLink":null,"publishedAt":null,"tags":null}}}}